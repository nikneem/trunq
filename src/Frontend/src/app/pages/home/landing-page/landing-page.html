<!-- Hero Section -->
<div class="hero modern">
  <mat-toolbar color="primary" class="hero__toolbar" role="banner">
    <span class="brand">trunq</span>
    <span class="spacer"></span>
    <ng-container *ngIf="!isAuthenticated(); else userMenu">
      <button mat-button class="header-btn" (click)="login()">Login</button>
      <button mat-flat-button color="accent" class="header-btn header-btn--primary" (click)="login()">Register</button>
    </ng-container>
    <ng-template #userMenu>
      <button mat-stroked-button color="primary" disabled>Signed In</button>
    </ng-template>
  </mat-toolbar>
  <div class="hero__inner">
    <div class="hero__content">
      <div class="hero__text">
        <h1>Short links. Serious foundation.</h1>
        <p class="tagline">Create clean, reliable short URLs on infrastructure designed for evolution—privacy‑aware, developer‑centric.</p>

        <div class="cta-buttons">
          <button *ngIf="!isAuthenticated(); else shortenCta" mat-flat-button color="primary" class="cta-primary" (click)="login()">Get Started</button>
          <ng-template #shortenCta>
            <button mat-flat-button color="primary" class="cta-primary" (click)="shortenUrl(longUrlInput.value)">Shorten</button>
          </ng-template>
          <button mat-stroked-button color="primary" class="cta-secondary">API Docs</button>
        </div>

        <ul class="selling-points">
          <li *ngFor="let point of sellingPoints">
            <mat-icon>check_circle</mat-icon>
            <span>{{ point }}</span>
          </li>
        </ul>
      </div>

      <mat-card class="hero__card require-auth" appearance="outlined">
        <mat-card-header>
          <mat-card-title>Create a Short Link</mat-card-title>
          <mat-card-subtitle *ngIf="!isAuthenticated()">Sign in required</mat-card-subtitle>
        </mat-card-header>
        <mat-card-content>
          <form (submit)="$event.preventDefault()" [attr.aria-disabled]="!isAuthenticated()" class="disabled-form">
            <mat-form-field appearance="outline" class="full-width">
              <mat-label>Long URL</mat-label>
              <input #longUrlInput matInput placeholder="https://example.com/very/long/link" [disabled]="!isAuthenticated()" />
            </mat-form-field>
            <button mat-flat-button color="primary" class="full-width" [disabled]="!isAuthenticated()" (click)="shortenUrl(longUrlInput.value)">Shorten</button>
            <button mat-stroked-button color="primary" class="full-width view-links-btn" [disabled]="!isAuthenticated()" (click)="goLinks()">View All My Links</button>
          </form>
          <div class="auth-hint" *ngIf="!isAuthenticated()">
            <mat-icon>lock</mat-icon>
            <span>Login or register to start shortening links.</span>
          </div>
        </mat-card-content>
        <mat-card-footer class="auth-actions" *ngIf="!isAuthenticated()">
          <button mat-stroked-button color="primary" (click)="login()">Login</button>
          <button mat-raised-button color="accent" class="accent-register" (click)="login()">Register</button>
        </mat-card-footer>
      </mat-card>
    </div>
  </div>
  <div class="hero__bg" aria-hidden="true"></div>
</div>

<!-- Features Section -->
<section class="features" aria-labelledby="features-heading">
  <h2 id="features-heading">Why trunq?</h2>
  <div class="features__grid">
    <mat-card *ngFor="let f of features" class="feature-card" appearance="outlined">
      <mat-card-header>
        <mat-icon mat-card-avatar>{{ f.icon }}</mat-icon>
        <mat-card-title>{{ f.title }}</mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <p>{{ f.description }}</p>
      </mat-card-content>
    </mat-card>
  </div>
</section>

<!-- Footer -->
<footer class="site-footer" role="contentinfo">
  <div class="footer__inner">
    <span>&copy; {{ year }} trunq</span>
    <span class="bullet" aria-hidden="true">&bull;</span>
    <span>Open, extensible URL shortening core.</span>
  </div>
</footer>
